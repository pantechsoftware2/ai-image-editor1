â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  MVP LOOP - COMPLETE WORKFLOW TEST GUIDE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FEATURES JUST IMPLEMENTED:
âœ… Smart Image Selection - Click image, auto-adds as background
âœ… Auto-Generated Headlines - Gemini creates punchy text overlay
âœ… AI Text Effects Toggle - "Use AI Text Effects?" for text rendering
âœ… Canvas Text Overlay - Editable text with brand colors
âœ… Seamless Integration - URL â†’ Brand â†’ Prompt â†’ Image + Text

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP-BY-STEP TEST (Normal Mode)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. GO TO EDITOR
   URL: http://localhost:3000
   Click "Editor" button

2. EXTRACT BRAND
   - Brand URL field: "google.com"
   - Click "âœ¨ Extract Brand DNA"
   - Wait for brand colors to appear
   - Click "Confirm" button
   - Should see Google colors in sidebar

3. GENERATE IMAGE (Normal Mode)
   - In "Generate Image" field, type: "coffee"
   - Make sure toggle "Use AI Text Effects?" is OFF
   - Click "ğŸ¨ Generate Image"
   - Wait 30-60 seconds for 4 images to generate

4. SELECT IMAGE & AUTO-TEXT
   - Image grid appears with 4 variants
   - Click on any image to select it
   - Expected behavior:
     âœ“ Image appears as background on canvas (1080x1350)
     âœ“ Text overlay auto-generated by Gemini (5 words max)
     âœ“ Text colored with Google brand primary color
     âœ“ Text editable - double-click to change it
     âœ“ Modal closes automatically after selection

5. EDIT & EXPORT
   - Double-click text to edit headline
   - Add more text with "+ Add Text" button
   - Adjust text position by dragging
   - Click "â¬‡ï¸ Download" to export PNG

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ADVANCED TEST (AI Text Effects Mode)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This feature renders TEXT DIRECTLY IN the generated image (non-editable).

1. EXTRACT BRAND (same as above)
   - Brand URL: "google.com"
   - Confirm colors

2. ENABLE AI TEXT EFFECTS
   - In "Generate Image" field: "coffee"
   - TOGGLE ON: "Use AI Text Effects?"
   - Warning appears: "âš ï¸ Renders text in image (non-editable)"

3. GENERATE WITH TEXT RENDERING
   - Click "ğŸ¨ Generate Image"
   - Wait 30-60 seconds
   - 4 images generated WITH text baked in

4. WHAT TO EXPECT
   - Images will have "COFFEE" or "SALE" text rendered
   - Text is artistic (smoke, fire, cinematic effects)
   - Text is part of the image (non-editable)
   - Cannot be edited on canvas
   - Perfect for social media that needs bold text graphics

5. SELECT & EXPORT
   - Click to select image (no headline auto-gen in this mode)
   - Image added to canvas
   - Download as usual

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EXPECTED CONSOLE LOGS (Check F12 â†’ Console)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

When selecting image (Normal Mode):
  ğŸ“¸ Loading image as background...
  âœ… Image added to canvas as background
  âœ¨ Generating headline with Gemini...
  ğŸ’­ Generated headline: [your auto-generated text]
  âœ… Headline added to canvas

When generating with AI Text Effects:
  ğŸš€ Generating images with prompt: coffee
  ğŸ¨ Using AI Text Effects: true
  ğŸš€ Calling Imagen-4 API...
  âœ¨ Generated images: 4

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TEST CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MVP Loop (Normal Mode):
â˜ Brand extraction works (google.com)
â˜ Image generation creates 4 variants
â˜ Image selection adds background to canvas (1080x1350)
â˜ Gemini headline auto-generates (5 words max)
â˜ Text is brand primary color
â˜ Text is centered and editable
â˜ Modal closes after selection
â˜ Can edit text by double-clicking
â˜ Can add more text with "+ Add Text" button
â˜ Download creates PNG with image + text

AI Text Effects (Advanced Mode):
â˜ Toggle "Use AI Text Effects?" appears
â˜ Toggle is OFF by default
â˜ Toggle ON changes prompt in API call
â˜ Images generate with text baked in
â˜ Text is artistic/stylized (smoke, fire, etc.)
â˜ Text is non-editable (part of image)
â˜ Images still have 1080x1350 dimensions
â˜ Can select and add to canvas
â˜ Download works correctly

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPTS BEING SENT (Debug Info)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Normal Mode - what Imagen sees:
  "coffee, photorealistic, high quality, professional photography, 
   leave top 10% empty (50-100px height) for text overlay in solid color,
   image occupies 60% height, text area 40% height, 9:11.25 total aspect ratio,
   8K resolution, ultra high quality, professional grade"

AI Text Effects - what Imagen sees:
  "Background: coffee, with text "coffee" rendered cinematic, professional, 
   bold typography, dramatic composition, high contrast, 8K resolution, 
   professional design"

Gemini (Headline) - what Gemini sees:
  "Generate a single, short marketing headline (5 words max) for a design 
   image about "coffee". Be creative and punchy. Return ONLY the headline 
   text, nothing else."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem: Image doesn't appear on canvas
â†’ Check browser console for errors
â†’ Verify image URL is accessible
â†’ Check that canvas is sized correctly

Problem: Headline doesn't generate
â†’ GOOGLE_GENERATIVE_AI_API_KEY may not be set
â†’ Check .env.local for the API key
â†’ If missing, text defaults to capitalized prompt

Problem: "Use AI Text Effects?" toggle not visible
â†’ Refresh page (Ctrl+R)
â†’ Check browser cache (Ctrl+Shift+Delete)

Problem: AI Text not rendering in images
â†’ Make sure toggle is ON before generating
â†’ Some prompts may not work well with text rendering
â†’ Try simpler prompts like "SALE" or "NEW"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NEW API ENDPOINT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

POST /api/generateHeadline
  Input: { subject: string }
  Output: { success: boolean, headline?: string, error?: string }
  Purpose: Auto-generate marketing headlines with Gemini
  Called when: User selects an image in normal mode

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CODE CHANGES SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. canvas.tsx
   - Added useAIText state for toggle
   - handleImageSelect: loads image as background, generates headline
   - generateAndAddHeadline: calls Gemini API, adds text to canvas
   - UI toggle added in Tools section
   - Updated generateImages to pass useAIText to API

2. image-grid.tsx
   - handleSelect closes modal after 500ms
   - Allows time for image to load before closing

3. prompt-engineering.ts
   - Added generateHeadlinePrompt()
   - Added generateTextRenderingPrompt()
   - Added buildPromptWithTextRendering()
   - Supports AI text effects in prompts

4. generateImage/route.ts
   - Added useAIText and aiTextContent to request
   - Routes to buildPromptWithTextRendering if useAIText true
   - Logs which mode is being used

5. generateHeadline/route.ts (NEW)
   - Uses @google/generative-ai (Gemini)
   - Generates 5-word headlines
   - Returns plain text (no quotes/formatting)
   - Graceful fallback if API key missing

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ready to test! The MVP Loop is now complete:
  URL â†’ Brand Extraction â†’ Image Generation â†’ Auto-Headline â†’ Canvas

Let me know how it works! ğŸš€
